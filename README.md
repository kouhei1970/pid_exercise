# PID Exercise

LEGO SPIKE Prime用のPID制御ライントレーサープログラムです。

## 概要

このプログラムは、2つのカラーセンサーを使用してラインをトレースするロボットを制御します。PID制御アルゴリズムを使用して、安定したライントレースを実現します。

## 必要なハードウェア

- LEGO SPIKE Prime Hub
- モーター × 2（左右の車輪用）
- カラーセンサー × 2（左右のライン検出用）

### ポート接続

- **ポートA**: 左カラーセンサー
- **ポートB**: 右カラーセンサー
- **ポートC**: 左モーター
- **ポートD**: 右モーター

## 制御パラメータ

### PIDゲイン

```c
const float kp = 2.0;    // 比例ゲイン (P)
const float ki = 10.00;  // 積分ゲイン (I)
const float kd = 0.03;   // 微分ゲイン (D)
```

### その他のパラメータ

- `BASE_POWER`: 基本走行パワー（0〜100）デフォルト: 100
- `CONTROL_PERIOD_MS`: 制御周期（ミリ秒）デフォルト: 10ms

## 動作概要

1. プログラム起動後、3秒間の待機時間
2. 準備完了の音が鳴った後、ライントレース開始
3. 左右のカラーセンサーで反射光を検出
4. PID制御により、ライン上を安定して走行
5. 左右のモーター速度を調整してステアリング制御

## PID制御の仕組み

このプログラムでは、2つのカラーセンサーの反射光の差分を位置情報として使用し、以下の制御を行います：

- **P（比例）制御**: 現在の偏差に応じて即座に修正
- **I（積分）制御**: 過去の偏差の累積を考慮して定常偏差を削減
- **D（微分）制御**: 偏差の変化率を考慮してオーバーシュートを抑制

## ビルド方法

TOPPERSベースのビルドシステムを使用します。詳細なビルド手順については、TOPPERS/ASPカーネルのドキュメントを参照してください。

```bash
make -f Makefile.inc
```

## カスタマイズ

ロボットの特性やコースの条件に応じて、以下のパラメータを調整してください：

- PIDゲイン（kp, ki, kd）
- 基本走行速度（BASE_POWER）
- 制御周期（CONTROL_PERIOD_MS）
- 目標反射光値（midpoint）

## ライセンス

このプロジェクトのライセンスについては、プロジェクトオーナーにお問い合わせください。

## 作成者

kouhei1970
